# Functional test for structured block connections in 3D.
#
# RJG, 2018-01-23
#
# Can be run manually with the command:
# $ tclsh connection-shared-memory.test
#

package require tcltest 2.0
namespace import ::tcltest::*
configure -verbose {start body error}

test generate-ref-result {Generate reference result} -body {
    exec python generate-ref-result.py > LOGFILE_REF_RESULT
} -result {} -returnCodes {0}

test run-connection-tests {Run connection tests} -body {
    exec python run-cases.py > LOGFILE_MAIN_TESTS
} -result {} -returnCodes {0}

test check-for-failures {Check for failed connections} -body {
     catch { exec grep FAILED test-results.txt }
} -result {1} -returnCodes {0}

cleanupTests